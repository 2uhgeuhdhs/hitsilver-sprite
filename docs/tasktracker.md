/**
 * @file: docs/tasktracker.md
 * @description: Трекер задач проекта по шаблону.
 * @dependencies: docs/changelog.md, memory-bank/activeContext.md, memory-bank/progress.md
 * @created: 2025-08-18
 */

## Задача: Юридический механизм согласия и Cookie (MVP)
- Статус: Завершена
- Описание: Исследование требований (GDPR/ePrivacy, 152‑ФЗ, nFADP), тексты политик, баннер согласия, логирование, механика отзыва, базовый каталог.
- Шаги выполнения:
  - [x] Инициализированы Memory Bank и базовые документы в /docs
  - [x] Прочитаны Memory Bank файлы и составлены 1‑строчные резюме
  - [x] Провести официальное исследование требований и подготовить чек‑лист
  - [x] Подготовить драфты: Политика конфиденциальности, Политика Cookie, текст Согласия
  - [x] Реализовать баннер и блокировку не‑необходимых cookies до согласия
  - [x] Реализовать бэкенд логирования согласий
  - [x] Импортировать товары (часы, украшения) и карточки каталога
- Зависимости: Подтверждение юрисдикций, стек и интеграции

## Задача: Исследование официальных требований
- Статус: Завершена
- Описание: Собрать ссылки на нормативные акты и руководства (ЕС/РФ/CH), сформировать технический чек‑лист имплементации.
- Шаги выполнения:
  - [x] Сбор источников (GDPR, ePrivacy, EDPB, 152‑ФЗ, разъяснения РКН, nFADP, FDPIC)
  - [x] Синтез чек‑листа (баннер, категории согласия, блокировка, логирование, отзыв)
- Зависимости: N/A

## Задача: Декоративные боковые волны (UX)
- Статус: Завершена
- Описание: Добавить и настроить фиксированные боковые волны (SVG) с параллаксом и «переливом» при прокрутке, управляемые CSS‑переменной `--scroll`.
- Шаги выполнения:
  - [x] Создать компонент `WaveEdges` и стили, подключить в `src/App.jsx`
  - [x] Усилить эффект: увеличить ширину до `260px`, повысить `opacity`/`stroke-width`, подстроить `stroke-dasharray`/`stroke-dashoffset`, амплитуду параллакса до `10%`
  - [x] Обновить документацию (`docs/changelog.md`, `docs/tasktracker.md`) и Memory Bank (`memory-bank/activeContext.md`, `memory-bank/progress.md`)
- Зависимости: Глобальные стили, производительность на мобильных/десктоп

## Задача: Удаление декоративных боковых волн (rollback)
- Статус: Завершена
- Описание: Удалить компонент `WaveEdges` из приложения и все связанные стили, вернуть интерфейс к более строгому виду.
- Шаги выполнения:
  - [x] Удалён импорт и рендер `WaveEdges` в `src/App.jsx`
  - [x] Удалены связанные стили (`--scroll`, `.wave-edge*`, `.wave-group`, `.wave-path*`, медиаправило) в `src/index.css`
  - [x] Обновлена документация (`docs/changelog.md`, `docs/tasktracker.md`) и Memory Bank
- Зависимости: Проверка, что нигде более компонент не используется

## Задача: Добавить категорию «Часы» и пункт меню
- Статус: В процессе
- Описание: Добавить новую категорию каталога «Часы» в `src/data/categories.js` и пункты навигации «Часы» (desktop и мобильное меню) в `src/App.jsx`.
- Шаги выполнения:
  - [x] Обновить документацию (changelog, tasktracker, project, activeContext, progress)
  - [x] Добавить категорию «Часы» в `src/data/categories.js`
  - [x] Добавить пункт «Часы» в верхнее меню (desktop) в `src/App.jsx`
  - [x] Добавить пункт «Часы» в мобильное меню (раздел «Категории») в `src/App.jsx`
  - [x] Обновить фильтры на странице каталога `/products`: добавить «Часы», вынести «Подвески» из «Ожерелий» в отдельную категорию
  - [x] Добавить 2 товара в категорию «Часы» и назначить им подкатегорию `men` для работы фильтра
  - [x] Убрать обрезание заголовков карточек товаров (удалён `truncateText`, `line-clamp-2`)
  - [ ] Проверить работу навигации и поиска по категориям
- Зависимости: Наличие базовой структуры каталога и маршрутов категорий

## Задача: Этап 1 — Измерение и лёгкие выигрыши (производительность и бандл)
- Статус: Завершена
- Описание: Настроить измерения производительности и выполнить базовые оптимизации бандла.
- Шаги выполнения:
  - [x] Добавить анализ бандла (rollup-plugin-visualizer) и базовый Lighthouse-отчёт
  - [x] Перевести тяжёлые части на динамический импорт (lazy, route-based splitting)
  - [x] Оптимизировать импорты иконок/библиотек (tree-shaking) и выделить vendor‑чанки (manualChunks)
  - [x] Lazy-load изображений и responsive srcset/AVIF/WebP; заменить тяжёлые PNG на WebP/AVIF
- Зависимости: Vite build конфигурация, доступ к сборке

## Задача: Этап 2 — UX каталога (фильтры/сортировка/скелетоны/хлебные крошки)
- Статус: В процессе
- Описание: Улучшить навигацию и взаимодействие в каталоге.
- Шаги выполнения:
  - [x] Добавить подкатегории `women` и `smart` с тестовыми товарами
  - [x] Реализовать сортировки (цена/популярность/новизна) и чипы активных фильтров (синхронизация с URL)
  - [ ] Добавить skeleton-загрузчики и состояния «нет результатов»
  - [ ] Добавить хлебные крошки для категорий/товаров
- Зависимости: Данные каталога, маршруты категорий/товара

## Задача: Этап 3 — SEO и разметка Schema.org
- Статус: Не начата
- Описание: Улучшить видимость в поиске и превью в соцсетях.
- Шаги выполнения:
  - [ ] Настроить React Helmet для тайтлов/мета per-route
  - [ ] Добавить JSON-LD: Organization, BreadcrumbList, Product
  - [ ] Подготовить sitemap.xml и robots.txt
  - [ ] Проверить валидаторами (Rich Results Test)
- Зависимости: Структура роутинга, доступ к деплою

## Задача: Этап 4 — Consent gating и метрики
- Статус: Не начата
- Описание: Инициализация аналитики и маркетинга строго по согласию.
- Шаги выполнения:
  - [ ] Централизовать инициализацию аналитики в `src/utils/analyticsManager.js`
  - [ ] Связать включение трекеров с состоянием cookie-consent
  - [ ] Добавить web-vitals сбор и алерты по деградации
- Зависимости: Баннер согласия и контекст

## Задача: Этап 5 — DX и тестирование
- Статус: Не начата
- Описание: Улучшить качество кода, автоматизировать проверки и базовые тесты.
- Шаги выполнения:
  - [ ] Добавить Prettier, husky и lint-staged (pre-commit)
  - [ ] Включить Vitest + React Testing Library для unit-тестов
  - [ ] Добавить Playwright для smoke E2E сценариев
- Зависимости: Настройка CI/локальные хуки

## Задача: Этап 6 — Мультиязычность (i18n)
- Статус: Не начата
- Описание: Подготовить инфраструктуру и контент для многоязычного интерфейса (RU базовый, добавить EN как вторую локаль).
- Шаги выполнения:
  - [ ] Выбрать библиотеку i18n (react-i18next или lingui) и настроить провайдер
  - [ ] Определить стратегию локалей: RU (base), EN (fallback/secondary), хранение словарей
  - [ ] Настроить детекцию языка (браузер/переключатель) и сохранение выбора (localStorage)
  - [ ] Вынести тексты страниц/навигации/модалок/баннера cookie в словари
  - [ ] SEO для i18n: структура URL (/ru, /en), hreflang/canonical
  - [ ] Локализация форматов дат/валют (при необходимости)
  - [ ] Тесты: переключение языка без перезагрузки, корректность мета-тегов
- Зависимости: Объём контента, стратегия SEO и маршрутизации

## Задача: Git workflow и напоминания
- Статус: Завершена
- Описание: Зафиксировать правила по коммитам/пушам, частоте, типам сообщений (Conventional Commits) и порядку фиксации документации.
- Шаги выполнения:
  - [x] Добавить раздел «Политика Git (коммиты/пуши) и напоминания» в `~/.codeium/windsurf/memories/global_rules.md`
  - [x] Зафиксировать регламент: после каждого значимого шага — обновить Memory Bank и /docs/*, затем `git commit` и `git push`/PR
  - [x] Описать частоту пушей (1–3/день), работу с ветками `feature/*`, типы коммитов (Conventional Commits)
  - [ ] Настроить pre-commit хуки (husky + lint-staged) — в рамках Этапа 5 (DX)
- Зависимости: Этап 5 для автоматизации pre-commit
## Задача: UX — плавная прокрутка и анимации переходов
- Статус: Завершена
- Описание: Включить глобальную плавную прокрутку и добавить плавные переходы между страницами (профиль, избранное и др.).
- Шаги выполнения:
  - [x] Добавить `html { scroll-behavior: smooth; }` в `src/index.css`
  - [x] Добавить keyframes и класс `.route-fade` в `src/index.css`
  - [x] Обернуть `<Outlet />` в контейнер с `key={location.pathname}` и `.route-fade` в `src/App.jsx`
  - [x] Добавить `useEffect` для `window.scrollTo({ top: 0, behavior: 'smooth' })` на смену маршрута
  - [x] Обновить документацию: changelog, project, activeContext, progress
- Зависимости: Рабочая маршрутизация `react-router-dom`

## Задача: Исправление ошибок в index.css (линты)
- Статус: Завершена
- Описание: Удалить нестандартные директивы (`@custom-variant`, `@theme`, `@layer`/`@apply`) и заменить на валидный CSS для устранения ошибок линтера.
- Шаги выполнения:
  - [x] Удалены нестандартные директивы из `src/index.css`
  - [x] Добавлены эквивалентные базовые стили без `@apply`
  - [x] Проверено отсутствие ошибок линтера
- Зависимости: N/A
