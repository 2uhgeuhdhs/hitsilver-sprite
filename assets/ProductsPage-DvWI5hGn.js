import{j as e,e as U,f as V,g as D,h as q,i as O,k as G,I as H,V as X,l as J,m as K,n as Q,o as W,p as Y,q as Z,r as ee,s as se}from"./vendor-radix-BhTwFlQR.js";import{r as h,i as te}from"./vendor-router-S2TzQLHx.js";import{P as ae}from"./product-grid-CA3LN8pD.js";import{c as C,a as f,C as re,p as le,B as N,X as z}from"./index-Bj9bDvTQ.js";import"./vendor-react-DJG_os-6.js";import"./product-card-C3hjIiWb.js";import"./vendor-utils-DyrdIqhm.js";/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],M=C("chevron-down",ie);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],oe=C("chevron-up",ne);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]],de=C("sliders-horizontal",ce);function ue({className:s,defaultValue:a,value:n,min:i=0,max:x=100,...l}){const c=h.useMemo(()=>Array.isArray(n)?n:Array.isArray(a)?a:[i,x],[n,a,i,x]);return e.jsxs(U,{"data-slot":"slider",defaultValue:a,value:n,min:i,max:x,className:f("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",s),...l,children:[e.jsx(V,{"data-slot":"slider-track",className:f("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:e.jsx(D,{"data-slot":"slider-range",className:f("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:c.length},(d,j)=>e.jsx(q,{"data-slot":"slider-thumb",className:"border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},j))]})}function A({...s}){return e.jsx(O,{"data-slot":"select",...s})}function $({...s}){return e.jsx(X,{"data-slot":"select-value",...s})}function E({className:s,size:a="default",children:n,...i}){return e.jsxs(G,{"data-slot":"select-trigger","data-size":a,className:f("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...i,children:[n,e.jsx(H,{asChild:!0,children:e.jsx(M,{className:"size-4 opacity-50"})})]})}function L({className:s,children:a,position:n="popper",...i}){return e.jsx(J,{children:e.jsxs(K,{"data-slot":"select-content",className:f("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:n,...i,children:[e.jsx(xe,{}),e.jsx(Q,{className:f("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:a}),e.jsx(me,{})]})})}function u({className:s,children:a,...n}){return e.jsxs(W,{"data-slot":"select-item",className:f("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",s),...n,children:[e.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:e.jsx(Y,{children:e.jsx(re,{className:"size-4"})})}),e.jsx(Z,{children:a})]})}function xe({className:s,...a}){return e.jsx(ee,{"data-slot":"select-scroll-up-button",className:f("flex cursor-default items-center justify-center py-1",s),...a,children:e.jsx(oe,{className:"size-4"})})}function me({className:s,...a}){return e.jsx(se,{"data-slot":"select-scroll-down-button",className:f("flex cursor-default items-center justify-center py-1",s),...a,children:e.jsx(M,{className:"size-4"})})}const F=({priceRange:s,handlePriceChange:a,categoryLabels:n,selectedCategories:i,handleCategoryChange:x,handleResetFilters:l})=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-3",children:"Цена"}),e.jsx(ue,{defaultValue:[0,1e6],max:1e6,step:1e4,value:s,onValueChange:a}),e.jsxs("div",{className:"flex justify-between items-center mt-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",value:s[0],onChange:c=>a([+c.target.value,s[1]]),className:"w-24 border rounded px-2 py-1 text-sm"}),e.jsx("span",{className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400",children:"₽"})]}),e.jsx("span",{children:"-"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",value:s[1],onChange:c=>a([s[0],+c.target.value]),className:"w-24 border rounded px-2 py-1 text-sm"}),e.jsx("span",{className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400",children:"₽"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-sm font-medium",children:"Категории"}),e.jsx("div",{className:"space-y-2",children:n.map(c=>e.jsxs("label",{className:"flex items-center space-x-2 text-sm",children:[e.jsx("input",{type:"checkbox",className:"rounded border-gray-300 text-tiffany-blue focus:ring-tiffany-blue",checked:i.includes(c),onChange:()=>x(c)}),e.jsx("span",{children:c})]},c))})]}),e.jsx(N,{variant:"outline",className:"w-full",onClick:l,children:"Сбросить фильтры"})]});function ye(){const s=[0,1e6],[a,n]=te(),[i,x]=h.useState("featured"),[l,c]=h.useState(s),[d,j]=h.useState([]),[R,b]=h.useState(!1),[S,p]=h.useState(!1),_={Ожерелья:["necklaces"],Подвески:["pendants"],Серьги:["earrings"],Кольца:["rings"],Браслеты:["bracelets"],Часы:["watches"]},w=Object.keys(_);h.useEffect(()=>{const t=a.get("sort")||"featured",o=a.get("categories"),r=a.get("price");if(x(t),o){const m=o.split(",").filter(g=>w.includes(g));j(m)}if(r){const[m,g]=r.split("-"),T=Number(m),B=Number(g);!Number.isNaN(T)&&!Number.isNaN(B)&&c([T,B])}},[]),h.useEffect(()=>{const t=new URLSearchParams(a);i&&i!=="featured"?t.set("sort",i):t.delete("sort"),d.length>0?t.set("categories",d.join(",")):t.delete("categories"),l[0]!==s[0]||l[1]!==s[1]?t.set("price",`${l[0]}-${l[1]}`):t.delete("price"),n(t,{replace:!0})},[i,d,l]);const v=h.useMemo(()=>{let t=le.filter(r=>r.price>=l[0]&&r.price<=l[1]);d.length>0&&(t=t.filter(r=>d.some(m=>{const g=_[m];return g.includes(r.subcategoryId)||g.includes(r.categoryId)})));let o=[...t];switch(i){case"price-asc":o.sort((r,m)=>r.price-m.price);break;case"price-desc":o.sort((r,m)=>m.price-r.price);break;case"newest":o=o.filter(r=>r.new).concat(o.filter(r=>!r.new));break;case"bestsellers":o=o.filter(r=>r.bestseller).concat(o.filter(r=>!r.bestseller));break}return o},[l,d,i]),k=t=>{j(o=>o.includes(t)?o.filter(r=>r!==t):[...o,t]),p(!0),setTimeout(()=>p(!1),400)},I=t=>{c(t),p(!0),setTimeout(()=>p(!1),400)},P=t=>{x(t),p(!0),setTimeout(()=>p(!1),400)},y=()=>{x("featured"),c(s),j([]),p(!0),setTimeout(()=>p(!1),300)};return e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[e.jsx("h1",{className:"text-3xl font-light text-gray-900 mb-8",children:"Все ювелирные изделия"}),e.jsxs("div",{className:"md:hidden flex justify-between items-center mb-4",children:[e.jsxs(N,{variant:"outline",size:"sm",onClick:()=>b(!0),className:"flex items-center gap-2",children:[e.jsx(de,{size:16}),"Фильтры"]}),e.jsxs(A,{value:i,onValueChange:P,children:[e.jsx(E,{className:"w-[140px]",children:e.jsx($,{placeholder:"Сортировать"})}),e.jsxs(L,{children:[e.jsx(u,{value:"featured",children:"По умолчанию"}),e.jsx(u,{value:"price-asc",children:"Сначала дешевые"}),e.jsx(u,{value:"price-desc",children:"Сначала дорогие"}),e.jsx(u,{value:"newest",children:"Новинки"}),e.jsx(u,{value:"bestsellers",children:"Хиты продаж"})]})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-8 products-page-container",children:[e.jsx("div",{className:"hidden md:block md:w-64 space-y-8 filters-sidebar",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Фильтры"}),e.jsx(F,{priceRange:l,handlePriceChange:I,categoryLabels:w,selectedCategories:d,handleCategoryChange:k,handleResetFilters:y})]})}),R&&e.jsxs("div",{className:"md:hidden fixed inset-0 z-50 flex",children:[e.jsx("div",{className:"fixed inset-0 bg-black/30",onClick:()=>b(!1)}),e.jsxs("div",{className:"relative bg-white w-72 max-w-full h-full shadow-lg z-50 animate-slide-in-left flex flex-col p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Фильтры"}),e.jsx("button",{className:"p-1 rounded-full hover:bg-gray-100",onClick:()=>b(!1),children:e.jsx(z,{size:20})})]}),e.jsx("div",{className:"overflow-y-auto flex-1",children:e.jsx(F,{priceRange:l,handlePriceChange:I,categoryLabels:w,selectedCategories:d,handleCategoryChange:k,handleResetFilters:y})}),e.jsx("div",{className:"mt-6 pt-4 border-t",children:e.jsxs(N,{className:"w-full bg-tiffany-blue text-white",onClick:()=>b(!1),children:["Применить (",v.length,")"]})})]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"hidden md:flex justify-between items-center mb-6",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["Показано ",v.length," товаров"]}),e.jsxs(A,{value:i,onValueChange:P,children:[e.jsx(E,{className:"w-[180px]",children:e.jsx($,{placeholder:"Сортировать по"})}),e.jsxs(L,{children:[e.jsx(u,{value:"featured",children:"По умолчанию"}),e.jsx(u,{value:"price-asc",children:"Сначала дешевые"}),e.jsx(u,{value:"price-desc",children:"Сначала дорогие"}),e.jsx(u,{value:"newest",children:"Новинки"}),e.jsx(u,{value:"bestsellers",children:"Хиты продаж"})]})]})]}),(d.length>0||l[0]!==s[0]||l[1]!==s[1])&&e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-4",children:[d.map(t=>e.jsxs("button",{type:"button",onClick:()=>k(t),className:"inline-flex items-center gap-1 px-2 py-1 rounded-full border text-sm hover:bg-gray-50","aria-label":`Убрать фильтр ${t}`,children:[e.jsx("span",{children:t}),e.jsx(z,{size:14})]},t)),(l[0]!==s[0]||l[1]!==s[1])&&e.jsxs("button",{type:"button",onClick:()=>c(s),className:"inline-flex items-center gap-1 px-2 py-1 rounded-full border text-sm hover:bg-gray-50","aria-label":"Сбросить фильтр цены",children:[e.jsx("span",{children:`Цена: ${l[0]}–${l[1]} ₽`}),e.jsx(z,{size:14})]}),e.jsx("button",{type:"button",onClick:y,className:"inline-flex items-center gap-1 px-2 py-1 rounded-full border text-sm hover:bg-gray-50",children:"Сбросить всё"})]}),v.length>0||S?e.jsx(ae,{products:v,loading:S,skeletonCount:8}):e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-gray-500 mb-4",children:"Товары не найдены. Попробуйте изменить фильтры."}),e.jsx(N,{variant:"outline",size:"sm",onClick:y,children:"Сбросить фильтры"})]})]})]})]})}export{ye as default};
